<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Hands–On Data Visualization with ggplot2 – Exercises Segment 1 – Cédric Scherer</title>
    <meta charset="utf-8" />
    <meta name="author" content="Cédric Scherer" />
    <meta name="date" content="2021-08-10" />
    <script src="libs/header-attrs-2.9/header-attrs.js"></script>
    <link rel="stylesheet" href="css/style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

class: inverse, center
background-image: url("img/darklight_RichardStrozynski.jpg")
background-size: contain



&lt;br&gt;&lt;br&gt;
# Hands–On Data Visualization with &lt;code style='color:#ebc500;'&gt;ggplot2&lt;/code&gt;&lt;br&gt;&lt;b style='font-size:25pt;color:#a7a7a7;'&gt;Exercises Segment 1: The Grammar of Graphics&lt;/b&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
#### Dr. Cédric Scherer&lt;b style='color:#ccba56;font-weight:400;line-height:150%;'&gt;&lt;br&gt;Pearson|O'Reilly Live Training Session&lt;br&gt;September 3, 2021&lt;/b&gt;&lt;br&gt;



---

## Exercise

* Import the data set on Chicago weather data:&lt;br&gt;https://github.com/z3tt/ggplot-courses/blob/master/data/chicago-nmmaps.csv
  + either from the web or from a local folder
  
* Inspect the data.

* Create a scatter plot of temperature (`temp`) versus day (`date`).

* Color the points by season.

* Color the points by year.
  + What's the problem? How could you fix it?
  
* **Bonus:** Turn the scatter plot, colored by season, into a line plot.
  + What's the problem? How could you fix it?

---

## Import the Data


```r
chic &lt;- readr::read_csv(
  "https://raw.githubusercontent.com/z3tt/ggplot-courses/master/data/chicago-nmmaps.csv"
)

# chic &lt;- readr::read_csv("data/chicago-nmmaps.csv")
```

---

## Inspect the Data


```r
str(chic)
## spec_tbl_df [1,461 x 10] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ city    : chr [1:1461] "chic" "chic" "chic" "chic" ...
##  $ date    : Date[1:1461], format: "1997-01-01" "1997-01-02" ...
##  $ death   : num [1:1461] 137 123 127 146 102 127 116 118 148 121 ...
##  $ temp    : num [1:1461] 36 45 40 51.5 27 17 16 19 26 16 ...
##  $ dewpoint: num [1:1461] 37.5 47.2 38 45.5 11.2 ...
##  $ pm10    : num [1:1461] 13.1 41.9 27 25.1 15.3 ...
##  $ o3      : num [1:1461] 5.66 5.53 6.29 7.54 20.76 ...
##  $ time    : num [1:1461] 3654 3655 3656 3657 3658 ...
##  $ season  : chr [1:1461] "Winter" "Winter" "Winter" "Winter" ...
##  $ year    : num [1:1461] 1997 1997 1997 1997 1997 ...
##  - attr(*, "spec")=
##   .. cols(
##   ..   city = col_character(),
##   ..   date = col_date(format = ""),
##   ..   death = col_double(),
##   ..   temp = col_double(),
##   ..   dewpoint = col_double(),
##   ..   pm10 = col_double(),
##   ..   o3 = col_double(),
##   ..   time = col_double(),
##   ..   season = col_character(),
##   ..   year = col_double()
##   .. )
```

---

## Inspect the Data


```r
summary(chic)
##      city                date                death            temp   
##  Length:1461        Min.   :1997-01-01   Min.   : 69.0   Min.   :-3  
##  Class :character   1st Qu.:1998-01-01   1st Qu.:101.0   1st Qu.:36  
##  Mode  :character   Median :1999-01-01   Median :110.0   Median :52  
##                     Mean   :1999-01-01   Mean   :111.3   Mean   :51  
##                     3rd Qu.:2000-01-01   3rd Qu.:120.0   3rd Qu.:67  
##                     Max.   :2000-12-31   Max.   :164.0   Max.   :90  
##                                                                      
##     dewpoint           pm10                o3                time     
##  Min.   :-10.38   Min.   :  0.2033   Min.   : 0.08584   Min.   :3654  
##  1st Qu.: 28.10   1st Qu.: 18.3844   1st Qu.:10.92419   1st Qu.:4019  
##  Median : 41.20   Median : 28.8499   Median :18.65149   Median :4384  
##  Mean   : 41.36   Mean   : 32.0928   Mean   :19.23597   Mean   :4384  
##  3rd Qu.: 56.25   3rd Qu.: 41.0738   3rd Qu.:26.20476   3rd Qu.:4749  
##  Max.   : 77.10   Max.   :125.3844   Max.   :54.68764   Max.   :5114  
##                   NA's   :17                                          
##     season               year     
##  Length:1461        Min.   :1997  
##  Class :character   1st Qu.:1998  
##  Mode  :character   Median :1999  
##                     Mean   :1999  
##                     3rd Qu.:2000  
##                     Max.   :2000  
## 
```

---

## Inspect the Data


```r
tibble::glimpse(chic)
## Rows: 1,461
## Columns: 10
## $ city     &lt;chr&gt; "chic", "chic", "chic", "chic", "chic", "chic", "chic", "chic~
## $ date     &lt;date&gt; 1997-01-01, 1997-01-02, 1997-01-03, 1997-01-04, 1997-01-05, ~
## $ death    &lt;dbl&gt; 137, 123, 127, 146, 102, 127, 116, 118, 148, 121, 110, 127, 1~
## $ temp     &lt;dbl&gt; 36.0, 45.0, 40.0, 51.5, 27.0, 17.0, 16.0, 19.0, 26.0, 16.0, 1~
## $ dewpoint &lt;dbl&gt; 37.500, 47.250, 38.000, 45.500, 11.250, 5.750, 7.000, 17.750,~
## $ pm10     &lt;dbl&gt; 13.052268, 41.948600, 27.041751, 25.072573, 15.343121, 9.3646~
## $ o3       &lt;dbl&gt; 5.659256, 5.525417, 6.288548, 7.537758, 20.760798, 14.940874,~
## $ time     &lt;dbl&gt; 3654, 3655, 3656, 3657, 3658, 3659, 3660, 3661, 3662, 3663, 3~
## $ season   &lt;chr&gt; "Winter", "Winter", "Winter", "Winter", "Winter", "Winter", "~
## $ year     &lt;dbl&gt; 1997, 1997, 1997, 1997, 1997, 1997, 1997, 1997, 1997, 1997, 1~
```

---

## Inspect the Data


```r
range(chic$date)
## [1] "1997-01-01" "2000-12-31"

range(chic$temp)
## [1] -3 90

unique(chic$season)
## [1] "Winter" "Spring" "Summer" "Autumn"

unique(chic$year)
## [1] 1997 1998 1999 2000
```

---

## Scatter Plot Temperature vs Day


```r
ggplot(chic, aes(date, temp)) + 
  geom_point()
```

&lt;img src="01-grammar-exercises_files/figure-html/plot-chic-scatter-1.png" width="1152" /&gt;

---

## Scatter Plot Colored by Season


```r
ggplot(chic, aes(date, temp, color = season)) + 
  geom_point()
```

&lt;img src="01-grammar-exercises_files/figure-html/plot-chic-scatter-season-1.png" width="1152" /&gt;

---

## Scatter Plot Colored by Year


```r
ggplot(chic, aes(date, temp, color = year)) + 
  geom_point()
```

&lt;img src="01-grammar-exercises_files/figure-html/plot-chic-scatter-year-cont-1.png" width="1152" /&gt;

---

## Scatter Plot Colored by Year


```r
ggplot(chic, aes(date, temp, color = factor(year))) + 
  geom_point()
```

&lt;img src="01-grammar-exercises_files/figure-html/plot-chic-scatter-year-fct-1.png" width="1152" /&gt;

---

## Scatter Plot Colored by Year


```r
ggplot(chic, aes(date, temp, color = season)) + 
  geom_line()
```

&lt;img src="01-grammar-exercises_files/figure-html/plot-chic-line-season-1.png" width="1152" /&gt;

---

## Scatter Plot Colored by Year


```r
ggplot(chic, aes(date, temp, color = season, group = year)) + 
  geom_line()
```

&lt;img src="01-grammar-exercises_files/figure-html/plot-chic-line-season-fixed-1.png" width="1152" /&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"slideNumberFormat": "<div class=\"progress-bar-container\">\n  <div class=\"progress-bar\" style=\"width: calc(%current% / %total% * 100%);\">\n  </div>\n</div>\n",
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
